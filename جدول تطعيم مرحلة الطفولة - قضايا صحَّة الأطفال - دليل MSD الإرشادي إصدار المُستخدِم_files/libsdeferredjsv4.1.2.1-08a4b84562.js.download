(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(n=n||self,n.stickybits=t())})(this,function(){"use strict";function t(t,i){return new n(t,i)}var n=function(){function t(n,t){var i=typeof t!="undefined"?t:{},u,f,s;this.version="3.6.1";this.userAgent=window.navigator.userAgent||"no `userAgent` provided by the browser";this.props={customStickyChangeNumber:i.customStickyChangeNumber||null,noStyles:i.noStyles||!1,stickyBitStickyOffset:i.stickyBitStickyOffset||0,parentClass:i.parentClass||"js-stickybit-parent",scrollEl:typeof i.scrollEl=="string"?document.querySelector(i.scrollEl):i.scrollEl||window,stickyClass:i.stickyClass||"js-is-sticky",stuckClass:i.stuckClass||"js-is-stuck",stickyChangeClass:i.stickyChangeClass||"js-is-sticky--change",useStickyClasses:i.useStickyClasses||!1,useFixed:i.useFixed||!1,useGetBoundingClientRect:i.useGetBoundingClientRect||!1,verticalPosition:i.verticalPosition||"top"};this.props.positionVal=this.definePosition()||"fixed";this.instances=[];var r=this.props,e=r.positionVal,o=r.verticalPosition,h=r.noStyles,c=r.stickyBitStickyOffset,l=r.useStickyClasses,a=o==="top"&&!h?c+"px":"",v=e!=="fixed"?e:"";for(this.els=typeof n=="string"?document.querySelectorAll(n):n,("length"in this.els)||(this.els=[this.els]),u=0;u<this.els.length;u++)f=this.els[u],f.style[o]=a,f.style.position=v,(e==="fixed"||l)&&(s=this.addInstance(f,this.props),this.instances.push(s))}var n=t.prototype;return n.definePosition=function(){var i,r,n,t;if(this.props.useFixed)i="fixed";else{for(r=["","-o-","-webkit-","-moz-","-ms-"],n=document.head.style,t=0;t<r.length;t+=1)n.position=r[t]+"sticky";i=n.position?n.position:"fixed";n.position=""}return i},n.addInstance=function(n,t){var u=this,i={el:n,parent:n.parentNode,props:t},r;return this.isWin=this.props.scrollEl===window,r=this.isWin?window:this.getClosestParent(i.el,i.props.scrollEl),this.computeScrollOffsets(i),i.parent.className+=" "+t.parentClass,i.state="default",i.stateContainer=function(){return u.manageState(i)},r.addEventListener("scroll",i.stateContainer),i},n.getClosestParent=function(n,t){var i=t,r=n;if(r.parentElement===i)return i;while(r.parentElement!==i)r=r.parentElement;return i},n.getTopPosition=function(n){if(this.props.useGetBoundingClientRect)return n.getBoundingClientRect().top+(this.props.scrollEl.pageYOffset||document.documentElement.scrollTop);var t=0;do t=n.offsetTop+t;while(n=n.offsetParent);return t},n.computeScrollOffsets=function(n){var t=n,i=t.props,u=t.el,r=t.parent,f=!this.isWin&&i.positionVal==="fixed",e=i.verticalPosition!=="bottom",o=f?this.getTopPosition(i.scrollEl):0,s=f?this.getTopPosition(r)-o:this.getTopPosition(r),c=i.customStickyChangeNumber!==null?i.customStickyChangeNumber:u.offsetHeight,h=s+r.offsetHeight;return t.offset=o+i.stickyBitStickyOffset,t.stickyStart=e?s-t.offset:0,t.stickyChange=t.stickyStart+c,t.stickyStop=e?h-(u.offsetHeight+t.offset):h-window.innerHeight,t},n.toggleClasses=function(n,t,i){var f=n,r=f.className.split(" "),u;i&&r.indexOf(i)===-1&&r.push(i);u=r.indexOf(t);u!==-1&&r.splice(u,1);f.className=r.join(" ")},n.manageState=function(n){var t=n,u=t.el,i=t.props,o=t.state,v=t.stickyStart,y=t.stickyChange,h=t.stickyStop,f=u.style,p=i.noStyles,c=i.positionVal,d=i.scrollEl,l=i.stickyClass,w=i.stickyChangeClass,a=i.stuckClass,b=i.verticalPosition,g=b!=="bottom",k=function(n){n()},s=this.isWin?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||k:k,e=this.toggleClasses,r=this.isWin?window.scrollY||window.pageYOffset:d.scrollTop,nt=r>v&&r<h&&(o==="default"||o==="stuck"),tt=g&&r<=v&&(o==="sticky"||o==="stuck"),it=r>=h&&o==="sticky";nt?(t.state="sticky",s(function(){(e(u,a,l),f.position=c,p)||(f.bottom="",f[b]=i.stickyBitStickyOffset+"px")})):tt?(t.state="default",s(function(){e(u,l);e(u,a);c==="fixed"&&(f.position="")})):it&&(t.state="stuck",s(function(){(e(u,l,a),c!=="fixed"||p)||(f.top="",f.bottom="0",f.position="absolute")}));var rt=r>=y&&r<=h,ut=r<y/2||r>h,ft="stub";return ut?s(function(){e(u,w)}):rt&&s(function(){e(u,ft,w)}),t},n.update=function(n){var t,i,r;for(n===void 0&&(n=null),t=0;t<this.instances.length;t+=1)if(i=this.instances[t],this.computeScrollOffsets(i),n)for(r in n)i.props[r]=n[r];return this},n.removeInstance=function(n){var t=n.el,i=n.props,r=this.toggleClasses;t.style.position="";t.style[i.verticalPosition]="";r(t,i.stickyClass);r(t,i.stuckClass);r(t.parentNode,i.parentClass)},n.cleanup=function(){for(var t,n=0;n<this.instances.length;n+=1)t=this.instances[n],t.props.scrollEl.removeEventListener("scroll",t.stateContainer),this.removeInstance(t);this.manageState=!1;this.instances=[]},t}();return t}),function(n){function s(){if(!f){f=!0;for(var i in t)n(i).each(function(){var r,u;r=n(this);u=r.data("jqae");(u.containerWidth!=r.width()||u.containerHeight!=r.height())&&o(r,t[i])});f=!1}}function h(n){t[n]&&(delete t[n],t.length||i&&(window.clearInterval(i),i=undefined))}function c(n,r){t[n]=r;i||(i=window.setInterval(function(){s()},200))}function e(){return this.nodeType===3}function u(t){var f,i,r;if(t.contents().length){if(f=t.contents(),i=f.eq(f.length-1),i.filter(e).length)return(r=i.get(0).nodeValue,r=n.trim(r),r=="")?(i.remove(),!0):!1;while(u(i));return i.contents().length?!1:(i.remove(),!0)}return!1}function r(n){var i,t;return n.contents().length?(t=n.contents(),i=t.eq(t.length-1),i.filter(e).length?i:r(i)):(n.append(""),t=n.contents(),t.eq(t.length-1))}function l(t){var u=r(t),i,f;return u.length?(i=u.get(0).nodeValue,f=i.lastIndexOf(" "),f>-1?(i=n.trim(i.substring(0,f)),u.get(0).nodeValue=i):u.get(0).nodeValue="",!0):!1}function o(t,i){var s=t.data("jqae"),f,e,h;s||(s={});f=s.wrapperElement;f||(f=t.wrapInner("<div/>").find(">div"),f.css({margin:0,padding:0,border:0}));e=f.data("jqae");e||(e={});h=e.originalContent;h?f=e.originalContent.clone(!0).data("jqae",{originalContent:h}).replaceAll(f):f.data("jqae",{originalContent:f.clone(!0)});t.data("jqae",{wrapperElement:f,containerWidth:t.width(),containerHeight:t.height()});var c=t.height(),a=(parseInt(t.css("padding-top"),10)||0)+(parseInt(t.css("border-top-width"),10)||0)-(f.offset().top-t.offset().top),o=!1,v=f;i.selector&&(v=n(f.find(i.selector).get().reverse()));v.each(function(){var t=n(this),s=t.text(),e=!1;if(f.innerHeight()-t.innerHeight()>c+a)t.remove();else if(u(t),t.contents().length){for(o&&(r(t).get(0).nodeValue+=i.ellipsis,o=!1);f.innerHeight()>c+a;){if(e=l(t),!e){o=!0;t.remove();break}if(u(t),t.contents().length)r(t).get(0).nodeValue+=i.ellipsis;else{o=!0;t.remove();break}}i.setTitle=="onEllipsis"&&e||i.setTitle=="always"?t.attr("title",s):i.setTitle!="never"&&t.removeAttr("title")}})}var t={},i,f=!1,a={ellipsis:"...",setTitle:"never",live:!1};n.fn.ellipsis=function(t,i){var u,r;return u=n(this),typeof t!="string"&&(i=t,t=undefined),r=n.extend({},a,i),r.selector=t,u.each(function(){var t=n(this);o(t,r)}),r.live?c(u.selector,r):h(u.selector),this}}(jQuery);Array.from||(Array.from=function(){var t=Object.prototype.toString,n=function(n){return typeof n=="function"||t.call(n)==="[object Function]"},i=function(n){var t=Number(n);return isNaN(t)?0:t===0||!isFinite(t)?t:(t>0?1:-1)*Math.floor(Math.abs(t))},r=Math.pow(2,53)-1,u=function(n){var t=i(n);return Math.min(Math.max(t,0),r)};return function(t){var h=this,c=Object(t),i,o;if(t==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");if(i=arguments.length>1?arguments[1]:void undefined,typeof i!="undefined"){if(!n(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var f=u(c.length),s=n(h)?Object(new h(f)):new Array(f),r=0,e;r<f;)e=c[r],s[r]=i?typeof o=="undefined"?i(e,r):i.call(o,e,r):e,r+=1;return s.length=f,s}}()),function e(n,t,i){function r(u,e){var s,h,o;if(!t[u]){if(!n[u]){if(s=typeof require=="function"&&require,!e&&s)return s(u,!0);if(f)return f(u,!0);h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h;}o=t[u]={exports:{}};n[u][0].call(o.exports,function(t){var i=n[u][1][t];return r(i?i:t)},o,o.exports,e,n,t,i)}return t[u].exports}for(var f=typeof require=="function"&&require,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function r(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function f(n,t,i){return t&&r(n.prototype,t),i&&r(n,i),n}Object.defineProperty(i,"__esModule",{value:!0});i.default=void 0;var e=function(){function n(){u(this,n)}return f(n,null,[{key:"getCookieExpiresString",value:function(n){var t=new Date,i=new Date(t.getTime()+n);return"expires=".concat(i.toGMTString(),";")}},{key:"bake",value:function(t,i){document.cookie="smartbanner_exited=1; ".concat(t?n.getCookieExpiresString(t):""," path=").concat(i)}},{key:"unbake",value:function(){document.cookie="smartbanner_exited=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"baked",get:function(){var n=document.cookie.replace(/(?:(?:^|.*;\s*)smartbanner_exited\s*=\s*([^;]*).*$)|^.*$/,"$1");return n==="1"}}]),n}();i.default=e},{}],2:[function(n,t,i){(function(n){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function t(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function u(n,i,r){return i&&t(n.prototype,i),r&&t(n,r),n}Object.defineProperty(i,"__esModule",{value:!0});i.default=void 0;var f=function(){function t(){r(this,t)}return u(t,null,[{key:"platform",value:function(){return/iPhone|iPad|iPod/i.test(window.navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1?"ios":/Android/i.test(window.navigator.userAgent)?"android":void 0}},{key:"userAgentMatchesRegex",value:function(n){return new RegExp(n).test(window.navigator.userAgent)}},{key:"jQueryMobilePage",value:function(){return typeof n.$!="undefined"&&n.$.mobile!=="undefined"&&document.querySelector(".ui-page")!==null}},{key:"wrapperElement",value:function(){var n=t.jQueryMobilePage()?".ui-page":"html";return document.querySelectorAll(n)}}]),t}();i.default=f}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],3:[function(n){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}var i=r(n("./smartbanner.js")),u=r(n("./detector.js")),t;u.default.jQueryMobilePage()?$(function(){t=new i.default;t.publish()}):window.addEventListener("load",function(){t=new i.default;t.publish()})},{"./smartbanner.js":5,"./detector.js":2}],4:[function(n,t,i){"use strict";function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function r(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function f(n,t,i){return t&&r(n.prototype,t),i&&r(n,i),n}function e(n){return n.indexOf("smartbanner:")!==-1&&n.split(":")[1].length>0}function o(n){var t=n.split("-");return t.map(function(n,i){i>0&&(t[i]=n.charAt(0).toUpperCase()+n.substring(1))}),t.join("")}Object.defineProperty(i,"__esModule",{value:!0});i.default=void 0;var s=function(){function n(){u(this,n)}return f(n,[{key:"parse",value:function(){var i=document.getElementsByTagName("meta"),t={},n=null;return Array.from(i).forEach(function(i){var r=i.getAttribute("name"),u=i.getAttribute("content");r&&u&&e(r)&&u.length>0&&(n=r.split(":")[1],n.indexOf("-")!==-1&&(n=o(n)),t[n]=u)}),t}}]),n}();i.default=s},{}],5:[function(n,t,i){"use strict";function f(n){return n&&n.__esModule?n:{"default":n}}function y(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function p(n,t,i){return t&&o(n.prototype,t),i&&o(n,i),n}function h(n,t){t.exit();n.preventDefault()}function c(n){this.positioningDisabled||l(n.data.height)}function w(n){var i=document.querySelector(".js_smartbanner__exit"),t;if(i.addEventListener("click",function(t){return h(t,n)}),t=document.querySelector(".breadcrumb__icons--print"),t!=null&&t.addEventListener("click",function(t){return h(t,n)}),r.default.jQueryMobilePage())$(document).on("pagebeforeshow",n,c)}function b(){r.default.jQueryMobilePage()&&$(document).off("pagebeforeshow",c)}function l(n){for(var f,e,o=r.default.wrapperElement(),i=0,s=o.length,t;i<s;i++)if(t=o[i],r.default.jQueryMobilePage()){if(t.getAttribute(u.originalTop))continue;f=parseFloat(getComputedStyle(t).top);t.setAttribute(u.originalTop,isNaN(f)?0:f);t.style.top=n+"px"}else{if(t.getAttribute(u.originalMarginTop))continue;e=parseFloat(getComputedStyle(t).marginTop);t.setAttribute(u.originalMarginTop,isNaN(e)?0:e);t.style.marginTop=n+"px"}}function k(){for(var i=r.default.wrapperElement(),t=0,f=i.length,n;t<f;t++)n=i[t],r.default.jQueryMobilePage()&&n.getAttribute(u.originalTop)?n.style.top=n.getAttribute(u.originalTop)+"px":n.getAttribute(u.originalMarginTop)&&(n.style.marginTop=n.getAttribute(u.originalMarginTop)+"px")}var s,u,a;Object.defineProperty(i,"__esModule",{value:!0});i.default=void 0;var v=f(n("./optionparser.js")),r=f(n("./detector.js")),e=f(n("./bakery.js"));s="android,ios";u={originalTop:"data-smartbanner-original-top",originalMarginTop:"data-smartbanner-original-margin-top"};a=function(){function n(){y(this,n);var t=new v.default;this.options=t.parse();this.platform=r.default.platform()}return p(n,[{key:"publish",value:function(){var i,n,t;if(Object.keys(this.options).length===0||e.default.baked||this.userAgentExcluded||!(this.platformEnabled||this.userAgentIncluded)||(i=window.location.href,i.indexOf("media=print")>-1))return!1;n=document.createElement("div");t=document.querySelector("body");t.insertBefore(n,t.firstChild);n.outerHTML=this.html;this.positioningDisabled||l(this.height);w(this)}},{key:"exit",value:function(){b();this.positioningDisabled||k();var n=document.querySelector(".js_smartbanner");document.querySelector("body").removeChild(n);e.default.bake(this.hideTtl,this.hidePath)}},{key:"originalTop",get:function(){var n=r.default.wrapperElement()[0];return parseFloat(n.getAttribute(u.originalTop))}},{key:"originalTopMargin",get:function(){var n=r.default.wrapperElement()[0];return parseFloat(n.getAttribute(u.originalMarginTop))}},{key:"priceSuffix",get:function(){return this.platform==="ios"?this.options.priceSuffixApple:this.platform==="android"?this.options.priceSuffixGoogle:""}},{key:"icon",get:function(){return this.platform==="android"?this.options.iconGoogle:this.options.iconApple}},{key:"buttonUrl",get:function(){return this.platform==="android"?this.options.buttonUrlGoogle:this.platform==="ios"?this.options.buttonUrlApple:"#"}},{key:"html",get:function(){var n=this.options.customDesignModifier?this.options.customDesignModifier:this.platform;return'<div class="smartbanner smartbanner--'.concat(n,' js_smartbanner">\n      <a href="javascript:void();" aria-label="banner close" class="smartbanner__exit js_smartbanner__exit"><\/a>\n      <div class="smartbanner__icon" style="background-image: url(').concat(this.icon,');"><\/div>\n      <div class="smartbanner__info">\n        <div>\n          <div class="smartbanner__info__title">').concat(this.options.title,'<\/div>\n          <div class="smartbanner__info__author">').concat(this.options.author,'<\/div>\n          <div class="smartbanner__info__price">').concat(this.options.price).concat(this.priceSuffix,'<\/div>\n        <\/div>\n      <\/div>\n      <a href="').concat(this.buttonUrl,'" class="smartbanner__button h-keep-target"><span class="smartbanner__button__label">').concat(this.options.button,"<\/span><\/a>\n    <\/div>")}},{key:"height",get:function(){var n=document.querySelector(".js_smartbanner").offsetHeight;return n!==undefined?n:0}},{key:"platformEnabled",get:function(){var n=this.options.enabledPlatforms||s;return n&&n.replace(/\s+/g,"").split(",").indexOf(this.platform)!==-1}},{key:"positioningDisabled",get:function(){return this.options.disablePositioning==="true"}},{key:"userAgentExcluded",get:function(){return this.options.excludeUserAgentRegex?r.default.userAgentMatchesRegex(this.options.excludeUserAgentRegex):!1}},{key:"userAgentIncluded",get:function(){return this.options.includeUserAgentRegex?r.default.userAgentMatchesRegex(this.options.includeUserAgentRegex):!1}},{key:"hideTtl",get:function(){return this.options.hideTtl?parseInt(this.options.hideTtl):!1}},{key:"hidePath",get:function(){return this.options.hidePath?this.options.hidePath:"/"}}]),n}();i.default=a},{"./bakery.js":1,"./detector.js":2,"./optionparser.js":4}]},{},[3])