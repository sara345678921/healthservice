(function(n){n.TablePlayerDefaultOptions={shareUrlBase:"table/",analyticsType:"Tables"};n.TablePlayerViewModel={createViewModel:function(t,i){function f(){r.parentContext.detailsAvailable(r.topicsWithResource().length>0||r.Description!=null&&r.Description()!=null&&r.Description().length>0||r.Credits!=null&&r.Credits()!=null&&r.Credits().length>0)}var r=this,u=URI.parseQuery(URI.parse(document.location.href).query);return r.parentContext=ko.contextFor(i.element).$data,r.tableBody=ko.observable(),r.topicsWithResource=ko.observableArray([]),r.topicsWithResourceLoading=ko.observable(),$.extend(r,t.item),$.extend(r,n.TablePlayerDefaultOptions,t.options),$.ajax({url:n.settings.topic.getTableBodyUrl,type:"GET",dataType:"json",data:{tableId:r.ItemId},async:!0,success:function(t){r.tableBody(t.TableBody);n.Foundation.Presentation.EventBus.emitEvent("multimedia.popup.table.show",{itemId:r.ItemId(),containerSelector:".multimedia__table"})}}),r.loadLocations=n.settings.loadLocationsGlobal||r.loadLocations,(r.ItemId()&&r.loadLocations||r.ItemId())&&n.getTopicsForResource(r.ItemId(),r.topicsWithResource,r.topicsWithResourceLoading),r.ShareUrlTitle!=null&&r.ShareUrlTitle()!=null&&r.ShareUrlTitle().length>0?r.parentContext.setShareUrlWithTitle(r.shareUrlBase,r.ShareUrlTitle(),r.Title()):r.UniqueId&&r.parentContext.setShareUrl(r.shareUrlBase,r.UniqueId(),r.Title()),r.topicsWithResource.subscribe(f),f(),u.client!=null&&u.client=="vin"?$(".modaldialog__icon--share.a2a_dd").hide():$(".modaldialog__icon--share.a2a_dd").show(),n.analytics.notifyOpenModal(r.analyticsType,r.Title(),r.UniqueId()),r}}})(window.MManual=window.MManual||{});ko.components.register("table-player",{template:{element:"table-player-template"},viewModel:MManual.TablePlayerViewModel});ko.bindingHandlers.mlinkToolTip={init:function(n,t,i,r,u){var f=ko.unwrap(t()),c=ko.mapping.toJS(u.$data.item),o=ko.unwrap(f.thumbnail),s=ko.unwrap(f.title),l=ko.unwrap(f.show),h=ko.unwrap(f.target),e=ko.unwrap(f.url);Modernizr.touchevents||l&&$(n).tooltip({content:function(){var n,t;return h=="modal"?"<div class='tooltip-container mlink-tooltip-container'> <a onclick='MLinkpopup("+JSON.stringify(c).replace(/'/g,escape)+")' class='anchor'><div class='tooltip-content'>  <div class='tooltip-heading'>"+s+" <\/div ><div class='tooltip-img'><img src='"+o+"' class='tooltip-Preview' /><\/div><\/div><\/a> <\/div>":(n="",e.indexOf("http://")==0||e.indexOf("https://")==0?n=e:(t=$("#landingPageUrl"),t=t.val().replace(/\/$/,""),n=t+"/"+e),"<div class='tooltip-container mlink-tooltip-container'> <a href='"+n+"' class='anchor' target='"+h+"'><div class='tooltip-content'>  <div class='tooltip-heading'>"+s+" <\/div ><div class='tooltip-img'><img src='"+o+"' class='tooltip-Preview' /><\/div><\/div><\/a> <\/div>")},open:function(n,t){if(typeof n.originalEvent=="undefined")return!1;var i=$(t.tooltip).attr("id");$("div.ui-tooltip").not("#"+i).remove()},close:function(n,t){t.tooltip.hover(function(){$(this).stop(!0).fadeTo(400,1)},function(){$(this).fadeOut("400",function(){$(this).remove()})})}})}}